<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>React App Setup</title>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css"></link>
    <div>
      <button onclick="transition()">Update</button>
    </div>
    <svg class="d3jason" width="960" height="500"></svg>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script>

      var n = 20, // number of layers
          m = 200, // number of samples per layer
          k = 10; // number of bumps per layer

      var stack = d3.stack().keys(d3.range(n)).offset(d3.stackOffsetWiggle),
          layers0 = stack(d3.transpose(d3.range(n).map(function() { return bumps(m, k); }))),
          layers1 = stack(d3.transpose(d3.range(n).map(function() { return bumps(m, k); }))),
          layers = layers0.concat(layers1);

      var svg = d3.select("svg.d3jason"),
          width = +svg.attr("width"),
          height = +svg.attr("height");

      var x = d3.scaleLinear()
          .domain([0, m - 1])
          .range([0, width]);

      var y = d3.scaleLinear()
          .domain([d3.min(layers, stackMin), d3.max(layers, stackMax)])
          .range([height, 0]);

      var z = d3.interpolateCool;

      var area = d3.area()
          .x(function(d, i) { return x(i); })
          .y0(function(d) { return y(d[0]); })
          .y1(function(d) { return y(d[1]); });

      svg.selectAll("path")
        .data(layers0)
        .enter().append("path")
          .attr("d", area)
          .attr("fill", function() { return z(Math.random()); });

      function stackMax(layer) {
        return d3.max(layer, function(d) { return d[1]; });
      }

      function stackMin(layer) {
        return d3.min(layer, function(d) { return d[0]; });
      }

      function transition() {
        var t;
        d3.selectAll("path")
          .data((t = layers1, layers1 = layers0, layers0 = t))
          .transition()
            .duration(2500)
            .attr("d", area);
      }

      // Inspired by Lee Byronâ€™s test data generator.
      function bumps(n, m) {
        var a = [], i;
        for (i = 0; i < n; ++i) a[i] = 0;
        for (i = 0; i < m; ++i) bump(a, n);
        return a;
      }

      function bump(a, n) {
        var x = 1 / (0.1 + Math.random()),
            y = 2 * Math.random() - 0.5,
            z = 10 / (0.1 + Math.random());
        for (var i = 0; i < n; i++) {
          var w = (i / n - y) * z;
          a[i] += x * Math.exp(-w * w);
        }
      }

    </script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

      // Load the Visualization API and the corechart package.
      google.charts.load('current', {'packages':['corechart']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
          ['Mushrooms', 3],
          ['Onions', 1],
          ['Olives', 1],
          ['Zucchini', 1],
          ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = {'title':'How Much Pizza I Ate Last Night',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="root">
    </div>
  <script type="text/javascript" src="index_bundle.js"></script></body>
</html>
